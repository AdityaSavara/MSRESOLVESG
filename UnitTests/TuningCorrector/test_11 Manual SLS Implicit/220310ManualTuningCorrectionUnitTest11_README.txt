Unit Test: test_11.py

Test_11 Quick Summary:              (Note: It's better to read this "README" file then to read the ProcDoc)

1)	Unit test_10.py was modified to include "SLS Implicit" on. Once modified, test_10.py was renamed to test_11.py. Note, the number of chosen molecules was also reduced when making test_11.py in order for SLS to be able to solve this dataset with the molecules provided.
	Note: test_10.turnedOff and test_11.turnedOff must be converted back into Python files (test_10.py and test_11.py). Both test_10 and test_11 are saved as turned off files to prevent errors when running a Unit Test.

2)	Our original reference pattern "AcetaldehydeMeasured.tsv" was scaled to 100 for each molecule, all intensities below 4 manually filtered out. This can be shown in "AcetaldehydeMeasured_Scaled_to_100.xlsx"

3)	Using the "180613MadixKoMSCorrectionsFactorExample_NO_HIDING.xlsx" file, we input the scaled molecule patterns (scaled to 100 for each molecule) from the our scaled original pattern file "AcetaldehydeMeasured_Scaled_to_100.xlsx" into MadixKo to get our correction factors (Non-Tuning Corrected). This is shown in the "180613MadixKo_Test_11.xlsx" file.

4)  	We must run test_11.py to know which significant Mass is used & SLS molecule order. This will tell us which correction factor we need to use for each molecule. You will need the measured csv file "2-CrotAcetExp#2". The original reference file "AcetaldehydeMeasured.tsv" and the existing tuning reference file "ReferenceLiterature.tsv". Once ran, we will get our SLS molecule order and chosen mass fragment in the export file "ExportedSLSUniqueMoleculesAndChosenMassFragments.tsv". We will then rename this file to "Masses-Molecules_SLS_UnitTest_Test_11.xlsx".
	Note: test_11.turnedOff must be converted back to a Python file (test_11.py).
	
5)	We acquire a Nist refernce pattern for the molecules used. This is the "ReferenceLiterature.tsv" that was used in the last step.  These patterns are then scaled to 100 for each molecule in the file "ReferenceLiterature_Standardized_100". Zeros where then removed from the patterns. This can be found in the "NistRef_Zeros_Removed.tsv"
	We must also acquire a measured reference file with zeros removed. Using the "ExportedReferencePatternDesiredOriginal.tsv" file (This file will be acquired after runing test_11.py) we will then remove the zeros and unneeded molecules, Kept: (Acetaldehyde, (E) 2-Butenal, Ethylene, Ethanol, Crotyl Alcohol). This can be found in the "MeasureRef_Zeros_Removed.tsv" file.

6)	We must now acquire our polynomial fit equation for tuning correction. Using the "TuningCorrectorGasMixtureHypotheticalReferenceMeasuredVsSimulated.xlsx"  excel file as a reference, we are able to create a polynomial fit equation between the measured reference pattern (MeasureRef_Zeros_Removed.tsv) and the Nist reference pattern (NistRef_Zeros_Removed.tsv). This equation can be used to create ratios for each molecular mass that will then be multiplied to the Nist reference pattern of "1Butanal" to get a Nist-TuningCorrected pattern for "1Butanal". The file with the created polynomial fit can be found in the "Created_Polynomial_Fit_Test_11.xlsx" file.  This pattern will also be standardized to 100.

7)	We now create a Mixed pattern, this reference pattern will include the original reference patterns (from AcetaldehydeMeasured_Scaled_to_100.xlsx) for molecules Acetaldehyde, CO, Ethylene (Ethene), Ethanol, Crotyl Alcohol, H2, H2O, and the Nist-TuningCorrected pattern for "1Butanal" ("1Butanal" tuning corrected made in the "Created_Polynomial_Fit_Test_11.xlsx") . This will give us our Mixed reference pattern ("Mixed_Ref.tsv"). We can then compare our manually created mixed reference pattern ("Mixed_Ref.tsv") to the MSRESOLVE created mixed reference pattern. The MSRESOLVE created mixed reference pattern can be found in the file "ExportedReferencePatternMixedChosenMolecules.tsv".

8)	Using the "180613MadixKoMSCorrectionsFactorExample_NO_HIDING.xlsx" excel file, we input the molecule patterns from our Mixed reference pattern ("Mixed_Ref.tsv") to get our new correction factors. This can be seen in the file "180613MadixKo_Test_11_TC_1butanal.xlsx". We will also create another Madix & Ko file named "180613MadixKo_Test_11_TC_1butanal_SLS_Implicit.xlsx". This file will include all molecule intensities. 

9)	We now perform SLS manually (with SLS Implicit) by picking a time from our collected signals file "2-CrotAcetExp#2", 176.848 for this example, and subtracting each molecule signal and their contributions (contributions are the intensites of each molecule as provided in the "Mixed_Ref.tsv". Order of molecule subtraction and chosen mass fragment in "Masses-Molecules_SLS_UnitTest_Test_11.xlsx") for each mass using our correction factors found in "180613MadixKo_Test_11_TC_1butanal_SLS_Implicit.xlsx". Using the Madix & Ko formula, we can obtain our partial solved concentration for each molecule. We now need to perform the last step of SLS Implicit. Using the left over signals we were left with after performing SLS, we must perform SLS Implicit. Manual SLS Implicit can be viewed in the "Test_11_SLS_Implicit.xlsx" file (This file will include the manually solved scaled concentrations using manual SLS Implicit). The file "ScaledConcentrations.tsv" includes the scaled concentrations solved by MSRESOLVE. This file will be renamed to "ScaledConcentrations_Implicit.tsv" to make it known that this file includes solved concetrations with SLS Implicit on. This file can then be compared to the "Test_11_SLS_Implicit.xlsx" file. Important Note: "Test_11_SLS_Implicit.xlsx" has only been done with zero recursion. The MSRESOLVE SLS Implicit concetration calculations from "ScaledConcentrations_Implicit.tsv" include multiple recursions. It is planned to create a feature such as "ImplicitSLSRecursion" that will allow the user to adjust how many times SLS Implicit Recursion occurs. 

10)	This directory will include extra files that will be used in the future in the aid of creating the "ImplicitSLSRecursion" Feature.
	
	"SLS-SLS_Implicit Percent Error": This file includes percent errors beween (Manual SLS & MSRESOLVE SLS), (Manual SLS Implicit & MSRESOLVE SLS Implicit), and (manual calculated SLS implicit correction term & MSRESOLVE calculated SLS implicit correction term) as of 3/17/2022.
	
	
